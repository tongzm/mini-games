<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>ğŸ¹ æ‰“åœ°é¼ </title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            user-select: none;
        }

        body {
            font-family: "PingFang SC", "Microsoft YaHei", sans-serif;
            background: linear-gradient(135deg, #2d5016 0%, #4a7c23 50%, #2d5016 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 10px;
            overflow-x: hidden;
        }

        h1 {
            color: #fff;
            font-size: 42px;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.4);
            margin: 10px 0;
        }

        .stats {
            display: flex;
            gap: 30px;
            margin: 10px 0 15px 0;
        }

        .stat-box {
            background: linear-gradient(145deg, #ffd700, #ffb300);
            padding: 12px 25px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            text-align: center;
        }

        .stat-label {
            font-size: 18px;
            color: #8b4513;
        }

        .stat-value {
            font-size: 36px;
            font-weight: bold;
            color: #d32f2f;
        }

        .game-board {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            max-width: 450px;
            width: 100%;
            padding: 20px;
            background: linear-gradient(145deg, #8b5a2b, #654321);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.4), inset 0 2px 10px rgba(255,255,255,0.1);
        }

        .hole {
            aspect-ratio: 1;
            background: radial-gradient(ellipse at center, #1a1a1a 0%, #3d2817 70%, #654321 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            box-shadow: inset 0 8px 20px rgba(0,0,0,0.8);
            transition: transform 0.1s;
        }

        .hole:active {
            transform: scale(0.95);
        }

        .mole {
            font-size: 60px;
            position: absolute;
            bottom: -100%;
            transition: bottom 0.15s ease-out;
            filter: drop-shadow(0 4px 8px rgba(0,0,0,0.5));
            animation: wiggle 0.3s ease-in-out infinite;
        }

        .mole.show {
            bottom: 5%;
        }

        @keyframes wiggle {
            0%, 100% { transform: rotate(-3deg); }
            50% { transform: rotate(3deg); }
        }

        .mole.hit {
            animation: hitAnim 0.3s ease-out forwards;
        }

        @keyframes hitAnim {
            0% { transform: scale(1); }
            50% { transform: scale(1.3) rotate(15deg); }
            100% { transform: scale(0) rotate(30deg); bottom: -100%; }
        }

        .hit-effect {
            position: absolute;
            font-size: 48px;
            font-weight: bold;
            color: #ffd700;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            pointer-events: none;
            animation: floatUp 0.8s ease-out forwards;
        }

        @keyframes floatUp {
            0% { opacity: 1; transform: translateY(0) scale(1); }
            100% { opacity: 0; transform: translateY(-60px) scale(1.5); }
        }

        .controls {
            margin-top: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }

        .btn {
            padding: 18px 50px;
            font-size: 28px;
            font-weight: bold;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }

        .btn-start {
            background: linear-gradient(145deg, #ff6b6b, #d32f2f);
            color: white;
        }

        .btn-start:hover {
            background: linear-gradient(145deg, #ff8a8a, #e53935);
            transform: translateY(-2px);
        }

        .btn-start:active {
            transform: translateY(2px);
        }

        .btn-sound {
            padding: 10px 20px;
            font-size: 18px;
            background: rgba(255,255,255,0.2);
            border: 2px solid rgba(255,255,255,0.5);
            color: white;
            border-radius: 30px;
            cursor: pointer;
            margin-top: 10px;
        }

        .speed-control {
            display: flex;
            align-items: center;
            gap: 15px;
            background: rgba(255,255,255,0.15);
            padding: 12px 20px;
            border-radius: 15px;
        }

        .speed-label {
            color: white;
            font-size: 22px;
        }

        .speed-btns {
            display: flex;
            gap: 8px;
        }

        .speed-btn {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: 3px solid white;
            background: transparent;
            color: white;
            font-size: 22px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
        }

        .speed-btn.active {
            background: #ffd700;
            color: #333;
            border-color: #ffd700;
        }

        .message {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(145deg, #ff6b6b, #d32f2f);
            color: white;
            padding: 30px 50px;
            border-radius: 20px;
            font-size: 32px;
            font-weight: bold;
            text-align: center;
            box-shadow: 0 10px 40px rgba(0,0,0,0.5);
            z-index: 100;
            display: none;
        }

        .message.show {
            display: block;
            animation: popIn 0.4s ease-out;
        }

        @keyframes popIn {
            0% { transform: translate(-50%, -50%) scale(0); }
            70% { transform: translate(-50%, -50%) scale(1.1); }
            100% { transform: translate(-50%, -50%) scale(1); }
        }

        .timer-bar {
            width: 100%;
            max-width: 400px;
            height: 20px;
            background: rgba(255,255,255,0.3);
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }

        .timer-fill {
            height: 100%;
            background: linear-gradient(90deg, #4caf50, #8bc34a);
            border-radius: 10px;
            transition: width 0.1s linear;
        }

        .timer-fill.warning {
            background: linear-gradient(90deg, #ff9800, #ffc107);
        }

        .timer-fill.danger {
            background: linear-gradient(90deg, #f44336, #ff5722);
        }

        /* æ–°æ‰‹å¼•å¯¼å¼¹çª— */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 200;
        }

        .modal {
            background: linear-gradient(145deg, #fff8e1, #ffecb3);
            padding: 30px;
            border-radius: 25px;
            max-width: 90%;
            width: 380px;
            text-align: center;
            box-shadow: 0 15px 50px rgba(0,0,0,0.4);
        }

        .modal h2 {
            color: #d32f2f;
            font-size: 32px;
            margin-bottom: 20px;
        }

        .modal p {
            color: #5d4037;
            font-size: 22px;
            line-height: 1.6;
            margin-bottom: 15px;
        }

        .modal .emoji-demo {
            font-size: 64px;
            margin: 15px 0;
        }

        .modal .btn-got-it {
            background: linear-gradient(145deg, #4caf50, #388e3c);
            color: white;
            padding: 15px 40px;
            font-size: 26px;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            margin-top: 15px;
        }

        .praise {
            position: fixed;
            top: 30%;
            left: 50%;
            transform: translateX(-50%);
            font-size: 48px;
            font-weight: bold;
            color: #ffd700;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.5);
            pointer-events: none;
            animation: praiseAnim 1s ease-out forwards;
            z-index: 50;
        }

        @keyframes praiseAnim {
            0% { opacity: 0; transform: translateX(-50%) scale(0.5); }
            20% { opacity: 1; transform: translateX(-50%) scale(1.2); }
            80% { opacity: 1; }
            100% { opacity: 0; transform: translateX(-50%) translateY(-50px); }
        }

        .combo {
            color: #ff6b6b;
            font-size: 24px;
            margin-top: 5px;
        }

        .hidden {
            display: none !important;
        }

        .btn-sound {
            padding: 12px 25px;
            font-size: 22px;
            border: none;
            border-radius: 30px;
            background: rgba(255,255,255,0.2);
            color: white;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-sound:hover {
            background: rgba(255,255,255,0.3);
        }

        .btn-sound.muted {
            opacity: 0.5;
        }
    </style>
</head>
<body>
    <!-- æ–°æ‰‹å¼•å¯¼ -->
    <div class="modal-overlay" id="tutorial">
        <div class="modal">
            <h2>ğŸ¹ æ‰“åœ°é¼ </h2>
            <div class="emoji-demo">ğŸ¹ğŸ‘†</div>
            <p>åœ°é¼ å†’å¤´å°±<b>ç‚¹å®ƒ</b>ï¼</p>
            <p>æ‰“ä¸­ä¸€åªå¾— <b>10åˆ†</b></p>
            <p>è¿ç»­æ‰“ä¸­æœ‰<b>è¿å‡»åŠ åˆ†</b>å“¦ï½</p>
            <p style="color:#4caf50;">ğŸ† çœ‹çœ‹60ç§’èƒ½å¾—å¤šå°‘åˆ†ï¼</p>
            <button class="btn-got-it" onclick="closeTutorial()">æ˜ç™½äº†ï¼Œå¼€å§‹ï¼</button>
        </div>
    </div>

    <h1>ğŸ¹ æ‰“åœ°é¼ </h1>

    <div class="stats">
        <div class="stat-box">
            <div class="stat-label">å¾—åˆ†</div>
            <div class="stat-value" id="score">0</div>
        </div>
        <div class="stat-box">
            <div class="stat-label">æ—¶é—´</div>
            <div class="stat-value" id="time">60</div>
        </div>
    </div>

    <div class="timer-bar">
        <div class="timer-fill" id="timerFill"></div>
    </div>

    <div class="game-board" id="gameBoard">
        <!-- 9ä¸ªæ´ -->
    </div>

    <div class="controls">
        <div class="speed-control">
            <span class="speed-label">é€Ÿåº¦ï¼š</span>
            <div class="speed-btns">
                <button class="speed-btn active" data-speed="slow">æ…¢</button>
                <button class="speed-btn" data-speed="medium">ä¸­</button>
                <button class="speed-btn" data-speed="fast">å¿«</button>
            </div>
        </div>
        <button class="btn btn-start" id="startBtn" onclick="startGame()">å¼€å§‹æ¸¸æˆ</button>
        <button class="btn-sound" id="soundBtn" onclick="toggleSound()">ğŸ”Š éŸ³æ•ˆ</button>
    </div>

    <div class="message" id="message"></div>

    <script>
        // æ¸¸æˆçŠ¶æ€
        let score = 0;
        let timeLeft = 60;
        let gameRunning = false;
        let gameTimer = null;
        let moleTimer = null;
        let moleHideTimers = []; // ä¿å­˜æ‰€æœ‰éšè—è®¡æ—¶å™¨
        let combo = 0;
        let lastHoleIndex = -1;

        // é€Ÿåº¦è®¾ç½® (åœ°é¼ åœç•™æ—¶é—´)
        const speeds = {
            slow: { stay: 1500, interval: 1200 },
            medium: { stay: 1000, interval: 900 },
            fast: { stay: 700, interval: 600 }
        };
        let currentSpeed = 'slow';

        // åœ°é¼ è¡¨æƒ…
        const moleEmojis = ['ğŸ¹', 'ğŸ­', 'ğŸ€'];
        const hitPraises = ['å¥½æ£’ï¼', 'å¤ªå‰å®³äº†ï¼', 'ç¥é€Ÿï¼', 'çœŸå‡†ï¼', 'ç»§ç»­åŠ æ²¹ï¼', '666ï¼'];

        // éŸ³æ•ˆç³»ç»Ÿ
        let audioCtx = null;
        let soundEnabled = true;

        function initAudio() {
            if (!audioCtx) {
                audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            }
            if (audioCtx.state === 'suspended') {
                audioCtx.resume();
            }
        }

        // æ‰“ä¸­éŸ³æ•ˆ - æ¸…è„†çš„"å®"
        function playHitSound() {
            if (!soundEnabled || !audioCtx) return;
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.connect(gain);
            gain.connect(audioCtx.destination);
            osc.frequency.setValueAtTime(800, audioCtx.currentTime);
            osc.frequency.exponentialRampToValueAtTime(1200, audioCtx.currentTime + 0.1);
            gain.gain.setValueAtTime(0.3, audioCtx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.2);
            osc.start(audioCtx.currentTime);
            osc.stop(audioCtx.currentTime + 0.2);
        }

        // è¿å‡»éŸ³æ•ˆ - æ›´é«˜éŸ³è°ƒ
        function playComboSound(combo) {
            if (!soundEnabled || !audioCtx) return;
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.connect(gain);
            gain.connect(audioCtx.destination);
            const baseFreq = 600 + combo * 100; // è¿å‡»è¶Šå¤šéŸ³è°ƒè¶Šé«˜
            osc.frequency.setValueAtTime(baseFreq, audioCtx.currentTime);
            osc.frequency.exponentialRampToValueAtTime(baseFreq * 1.5, audioCtx.currentTime + 0.15);
            gain.gain.setValueAtTime(0.25, audioCtx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.25);
            osc.start(audioCtx.currentTime);
            osc.stop(audioCtx.currentTime + 0.25);
        }

        // å¼€å§‹éŸ³æ•ˆ - ä¸Šå‡éŸ³é˜¶
        function playStartSound() {
            if (!soundEnabled || !audioCtx) return;
            [523, 659, 784].forEach((freq, i) => {
                const osc = audioCtx.createOscillator();
                const gain = audioCtx.createGain();
                osc.connect(gain);
                gain.connect(audioCtx.destination);
                osc.frequency.setValueAtTime(freq, audioCtx.currentTime + i * 0.1);
                gain.gain.setValueAtTime(0.2, audioCtx.currentTime + i * 0.1);
                gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + i * 0.1 + 0.2);
                osc.start(audioCtx.currentTime + i * 0.1);
                osc.stop(audioCtx.currentTime + i * 0.1 + 0.2);
            });
        }

        // ç»“æŸéŸ³æ•ˆ - ä¸‹é™éŸ³é˜¶
        function playEndSound() {
            if (!soundEnabled || !audioCtx) return;
            [784, 659, 523].forEach((freq, i) => {
                const osc = audioCtx.createOscillator();
                const gain = audioCtx.createGain();
                osc.connect(gain);
                gain.connect(audioCtx.destination);
                osc.frequency.setValueAtTime(freq, audioCtx.currentTime + i * 0.15);
                gain.gain.setValueAtTime(0.2, audioCtx.currentTime + i * 0.15);
                gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + i * 0.15 + 0.3);
                osc.start(audioCtx.currentTime + i * 0.15);
                osc.stop(audioCtx.currentTime + i * 0.15 + 0.3);
            });
        }

        // æ¼æ‰éŸ³æ•ˆ - ä½æ²‰çš„"å’š"
        function playMissSound() {
            if (!soundEnabled || !audioCtx) return;
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.type = 'sine';
            osc.connect(gain);
            gain.connect(audioCtx.destination);
            osc.frequency.setValueAtTime(200, audioCtx.currentTime);
            osc.frequency.exponentialRampToValueAtTime(100, audioCtx.currentTime + 0.15);
            gain.gain.setValueAtTime(0.2, audioCtx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.15);
            osc.start(audioCtx.currentTime);
            osc.stop(audioCtx.currentTime + 0.15);
        }

        // åˆå§‹åŒ–æ¸¸æˆæ¿
        function initBoard() {
            const board = document.getElementById('gameBoard');
            board.innerHTML = '';
            for (let i = 0; i < 9; i++) {
                const hole = document.createElement('div');
                hole.className = 'hole';
                hole.dataset.index = i;
                hole.innerHTML = `<div class="mole" id="mole${i}">ğŸ¹</div>`;
                hole.onclick = () => whackMole(i);
                board.appendChild(hole);
            }
        }

        // å…³é—­æ•™ç¨‹
        function closeTutorial() {
            document.getElementById('tutorial').classList.add('hidden');
            initAudio(); // ç”¨æˆ·äº¤äº’ååˆå§‹åŒ–éŸ³é¢‘
        }

        // é€Ÿåº¦é€‰æ‹©
        document.querySelectorAll('.speed-btn').forEach(btn => {
            btn.onclick = () => {
                if (gameRunning) return;
                document.querySelectorAll('.speed-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentSpeed = btn.dataset.speed;
            };
        });

        // å¼€å§‹æ¸¸æˆ
        function startGame() {
            if (gameRunning) return;
            
            gameRunning = true;
            score = 0;
            timeLeft = 60;
            combo = 0;
            updateDisplay();
            
            document.getElementById('startBtn').textContent = 'æ¸¸æˆä¸­...';
            document.getElementById('startBtn').style.opacity = '0.6';
            
            playStartSound(); // å¼€å§‹éŸ³æ•ˆ
            
            // å€’è®¡æ—¶
            gameTimer = setInterval(() => {
                timeLeft--;
                updateDisplay();
                updateTimerBar();
                
                if (timeLeft <= 0) {
                    endGame();
                }
            }, 1000);
            
            // å¼€å§‹å‡ºåœ°é¼ 
            spawnMole();
        }

        // å‡ºåœ°é¼ 
        function spawnMole() {
            if (!gameRunning) return;
            
            // éšæœºé€‰ä¸€ä¸ªæ´ï¼ˆé¿å…è¿ç»­åŒä¸€ä¸ªï¼‰
            let holeIndex;
            let attempts = 0;
            do {
                holeIndex = Math.floor(Math.random() * 9);
                attempts++;
            } while (holeIndex === lastHoleIndex && attempts < 10);
            lastHoleIndex = holeIndex;
            
            const mole = document.getElementById(`mole${holeIndex}`);
            mole.textContent = moleEmojis[Math.floor(Math.random() * moleEmojis.length)];
            mole.classList.remove('hit');
            mole.classList.add('show');
            
            // åœç•™æ—¶é—´åæ¶ˆå¤±
            const speed = speeds[currentSpeed];
            const hideTimer = setTimeout(() => {
                if (mole.classList.contains('show') && !mole.classList.contains('hit')) {
                    mole.classList.remove('show');
                    if (combo > 0) playMissSound(); // æ¼æ‰éŸ³æ•ˆ
                    combo = 0; // æ¼æ‰äº†ï¼Œè¿å‡»ä¸­æ–­
                }
            }, speed.stay);
            moleHideTimers.push(hideTimer);
            
            // ä¸‹ä¸€åª
            moleTimer = setTimeout(spawnMole, speed.interval);
        }

        // æ‰“åœ°é¼ 
        function whackMole(index) {
            if (!gameRunning) return;
            
            const mole = document.getElementById(`mole${index}`);
            if (!mole.classList.contains('show') || mole.classList.contains('hit')) {
                return; // æ²¡å†’å¤´æˆ–å·²ç»è¢«æ‰“
            }
            
            // æ‰“ä¸­äº†ï¼
            mole.classList.remove('show'); // ç«‹å³ç§»é™¤ï¼Œé˜²æ­¢å¿«é€Ÿç‚¹å‡»é‡å¤åˆ¤å®š
            mole.classList.add('hit');
            combo++;
            
            // æ’­æ”¾éŸ³æ•ˆ
            if (combo >= 3) {
                playComboSound(combo);
            } else {
                playHitSound();
            }
            
            // è®¡ç®—åˆ†æ•°ï¼ˆè¿å‡»åŠ åˆ†ï¼‰
            let points = 10;
            if (combo >= 3) points = 15;
            if (combo >= 5) points = 20;
            if (combo >= 10) points = 30;
            
            score += points;
            updateDisplay();
            
            // æ˜¾ç¤º+åˆ†
            showHitEffect(mole.parentElement, points);
            
            // æ‰‹æœºæŒ¯åŠ¨åé¦ˆ
            if (navigator.vibrate) {
                navigator.vibrate(50);
            }
            
            // è¿å‡»æç¤º
            if (combo >= 3) {
                showPraise(`${combo}è¿å‡»ï¼`);
            } else if (Math.random() < 0.3) {
                showPraise(hitPraises[Math.floor(Math.random() * hitPraises.length)]);
            }
            
            // åŠ¨ç”»åéšè—
            setTimeout(() => {
                mole.classList.remove('show');
                mole.classList.remove('hit');
            }, 300);
        }

        // æ˜¾ç¤º+åˆ†æ•ˆæœ
        function showHitEffect(hole, points) {
            const effect = document.createElement('div');
            effect.className = 'hit-effect';
            effect.textContent = `+${points}`;
            hole.appendChild(effect);
            setTimeout(() => effect.remove(), 800);
        }

        // æ˜¾ç¤ºè¡¨æ‰¬
        function showPraise(text) {
            const praise = document.createElement('div');
            praise.className = 'praise';
            praise.textContent = text;
            document.body.appendChild(praise);
            setTimeout(() => praise.remove(), 1000);
        }

        // æ›´æ–°æ˜¾ç¤º
        function updateDisplay() {
            document.getElementById('score').textContent = score;
            document.getElementById('time').textContent = timeLeft;
        }

        // æ›´æ–°æ—¶é—´æ¡
        function updateTimerBar() {
            const fill = document.getElementById('timerFill');
            const percent = (timeLeft / 60) * 100;
            fill.style.width = percent + '%';
            
            fill.classList.remove('warning', 'danger');
            if (percent <= 20) {
                fill.classList.add('danger');
            } else if (percent <= 40) {
                fill.classList.add('warning');
            }
        }

        // ç»“æŸæ¸¸æˆ
        function endGame() {
            gameRunning = false;
            clearInterval(gameTimer);
            clearTimeout(moleTimer);
            
            // æ¸…ç†æ‰€æœ‰éšè—è®¡æ—¶å™¨
            moleHideTimers.forEach(t => clearTimeout(t));
            moleHideTimers = [];
            
            playEndSound(); // ç»“æŸéŸ³æ•ˆ
            
            // éšè—æ‰€æœ‰åœ°é¼ 
            document.querySelectorAll('.mole').forEach(m => {
                m.classList.remove('show');
            });
            
            // æ˜¾ç¤ºç»“æœ
            let msg = '';
            if (score >= 500) {
                msg = `ğŸ† å¤ªå‰å®³äº†ï¼\nå¾—åˆ†ï¼š${score}\næ‚¨æ˜¯"æ‰“åœ°é¼ å¤§å¸ˆ"ï¼`;
            } else if (score >= 300) {
                msg = `ğŸ‰ çœŸæ£’ï¼\nå¾—åˆ†ï¼š${score}\nååº”è¶…å¿«ï¼`;
            } else if (score >= 150) {
                msg = `ğŸ‘ ä¸é”™ï¼\nå¾—åˆ†ï¼š${score}\nç»§ç»­åŠ æ²¹å“¦ï½`;
            } else {
                msg = `ğŸ˜Š å®Œæˆäº†ï¼\nå¾—åˆ†ï¼š${score}\nå¤šç»ƒç»ƒä¼šæ›´å¥½ï¼`;
            }
            
            showMessage(msg);
            playEndSound(); // ç»“æŸéŸ³æ•ˆ
            
            document.getElementById('startBtn').textContent = 'å†æ¥ä¸€å±€';
            document.getElementById('startBtn').style.opacity = '1';
        }

        // æ˜¾ç¤ºæ¶ˆæ¯
        function showMessage(text) {
            const msg = document.getElementById('message');
            msg.innerHTML = text.replace(/\n/g, '<br>');
            msg.classList.add('show');
            
            setTimeout(() => {
                msg.classList.remove('show');
            }, 3000);
        }

        // éŸ³æ•ˆå¼€å…³
        function toggleSound() {
            soundEnabled = !soundEnabled;
            const btn = document.getElementById('soundBtn');
            if (soundEnabled) {
                btn.textContent = 'ğŸ”Š éŸ³æ•ˆ';
                btn.style.opacity = '1';
                initAudio();
            } else {
                btn.textContent = 'ğŸ”‡ é™éŸ³';
                btn.style.opacity = '0.6';
            }
        }

        // åˆå§‹åŒ–
        initBoard();
        updateTimerBar();

        // éŸ³æ•ˆå¼€å…³
        function toggleSound() {
            soundEnabled = !soundEnabled;
            const btn = document.getElementById('soundBtn');
            if (soundEnabled) {
                btn.textContent = 'ğŸ”Š éŸ³æ•ˆ';
                btn.classList.remove('muted');
                initAudio();
            } else {
                btn.textContent = 'ğŸ”‡ é™éŸ³';
                btn.classList.add('muted');
            }
        }
    </script>
</body>
</html>
