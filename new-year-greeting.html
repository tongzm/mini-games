<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æ–°æ˜¥ç¥ç¦åŠ©æ‰‹ - ç»™æ‚¨æ‹œå¹´å•¦</title>
    <style>
        /* CSS Reset & Basic */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            user-select: none;
            -webkit-user-select: none; /* é’ˆå¯¹ iOS Safari */
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: #D9342B; /* æ­£å®«çº¢ */
            color: #333;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            overflow: hidden; /* é˜²æ­¢æ»šåŠ¨ */
        }

        /* æ ‡é¢˜ */
        .header {
            position: absolute;
            top: 5vh;
            text-align: center;
            width: 100%;
        }
        
        h1 {
            font-size: 32px;
            color: #FFD700; /* æµå…‰é‡‘ */
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            letter-spacing: 2px;
        }

        /* ç¥¥äº‘è£…é¥° (ç®€å•CSSæ¨¡æ‹Ÿ) */
        .cloud-bg {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
            opacity: 0.1;
            background-image: radial-gradient(#FFD700 2px, transparent 2px);
            background-size: 30px 30px;
            z-index: 0;
        }

        /* ç¥ç¦è¯­å¡ç‰‡ */
        .card-container {
            width: 90%;
            max-width: 600px;
            height: 50vh; /* å æ®å±å¹•ä¸€åŠé«˜åº¦ */
            background-color: #FFF8DC; /* ç±³é»„è‰² */
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
            border: 4px solid #FFD700;
            padding: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            z-index: 10;
            margin-bottom: 30px;
            transition: transform 0.2s ease;
        }

        /* æ–‡å­—å†…å®¹ */
        #greeting-text {
            font-size: 36px; /* é»˜è®¤è¶…å¤§å­—å· */
            line-height: 1.6;
            color: #B22222; /* æ·±çº¢ */
            text-align: center;
            font-weight: bold;
            word-break: break-word; /* é˜²æ­¢é•¿è¯æº¢å‡º */
        }
        
        /* é’ˆå¯¹ç‰¹å¤§å­—å·çš„åª’ä½“æŸ¥è¯¢ */
        @media (min-width: 768px) {
            #greeting-text { font-size: 48px; }
        }
        @media (max-width: 350px) {
            #greeting-text { font-size: 28px; }
        }

        /* æŒ‰é’®åŒºåŸŸ */
        .btn-group {
            width: 90%;
            max-width: 600px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            z-index: 10;
        }

        /* é€šç”¨æŒ‰é’®æ ·å¼ */
        .btn {
            border: none;
            border-radius: 50px;
            padding: 20px 0;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            text-align: center;
            outline: none;
            -webkit-tap-highlight-color: transparent;
        }

        .btn:active {
            transform: scale(0.95);
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        /* æ¢ä¸€å¥ (ä¸»æŒ‰é’®) */
        .btn-primary {
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
            color: #B22222;
            flex: 2; /* å æ¯”å¤§ */
        }

        /* å¤åˆ¶ (æ¬¡æŒ‰é’®) */
        .btn-secondary {
            background: rgba(255, 255, 255, 0.2);
            border: 3px solid #FFD700;
            color: #FFD700;
            flex: 1;
        }

        /* Toast æç¤ºæ¡† */
        #toast {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(0, 0, 0, 0.85);
            color: #fff;
            padding: 30px 50px;
            border-radius: 15px;
            font-size: 24px;
            z-index: 100;
            text-align: center;
            display: none; /* é»˜è®¤éšè— */
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
        }

        /* ç®€å•çš„æ·¡å…¥æ·¡å‡ºåŠ¨ç”» */
        .fade-in {
            animation: fadeIn 0.5s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }

        /* ç‰ˆæƒè„šæ ‡ */
        .footer {
            position: absolute;
            bottom: 10px;
            color: rgba(255,255,255,0.4);
            font-size: 12px;
        }

        /* éŸ³ä¹æ§åˆ¶æŒ‰é’® */
        .music-control {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 200;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.3);
            cursor: pointer;
            transition: transform 0.2s;
            font-size: 28px;
        }

        .music-control:active {
            transform: scale(0.95);
        }

        .music-control.rotating {
            animation: rotate 3s linear infinite;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* éŸ³é‡æ»‘å— */
        .volume-slider {
            position: fixed;
            top: 80px;
            right: 20px;
            background: rgba(255, 255, 255, 0.95);
            padding: 15px 20px;
            border-radius: 15px;
            box-shadow: 0 2px 15px rgba(0,0,0,0.3);
            z-index: 200;
            display: flex;
            align-items: center;
            gap: 10px;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
        }

        .volume-slider.show {
            opacity: 1;
            pointer-events: auto;
        }

        .volume-slider input[type="range"] {
            width: 100px;
            height: 8px;
            -webkit-appearance: none;
            background: #ddd;
            border-radius: 4px;
            outline: none;
        }

        .volume-slider input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            background: #FFD700;
            border-radius: 50%;
            cursor: pointer;
        }
    </style>
</head>
<body>

    <div class="cloud-bg"></div>

    <!-- éŸ³ä¹æ§åˆ¶æŒ‰é’® -->
    <div class="music-control" id="musicBtn" onclick="toggleMusic()" title="æ’­æ”¾/æš‚åœéŸ³ä¹">
        <span id="musicIcon">ğŸµ</span>
    </div>

    <!-- éŸ³é‡æ»‘å— -->
    <div class="volume-slider" id="volumeSlider">
        <span>ğŸ”Š</span>
        <input type="range" id="volumeControl" min="0" max="100" value="50" oninput="changeVolume()">
    </div>

    <!-- èƒŒæ™¯éŸ³ä¹ -->
    <audio id="bgMusic" loop>
        <source src="https://assets.mixkit.co/music/preview/mixkit-chinese-new-year-traditional-1189.mp3" type="audio/mpeg">
    </audio>

    <header class="header">
        <h1>ğŸ§§ æ–°æ˜¥ç¥ç¦åŠ©æ‰‹</h1>
    </header>

    <main class="card-container" id="card">
        <div id="greeting-text">åŠ è½½ä¸­...</div>
    </main>

    <div class="btn-group">
        <button class="btn btn-primary" onclick="newGreeting()">ğŸ”„ æ¢ä¸€å¥</button>
        <button class="btn btn-secondary" onclick="copyGreeting()">ğŸ“‹ å¤åˆ¶</button>
    </div>

    <div id="toast">âœ… å·²å¤åˆ¶ï¼å»å¾®ä¿¡ç²˜è´´å§</div>

    <div class="footer">ç”±å‡Œå‡Œä¸ºæ‚¨åˆ¶ä½œ â¤ï¸ ç¥æ‚¨æ–°å¹´å¿«ä¹</div>

    <script>
        // éŸ³ä¹æ§åˆ¶åŠŸèƒ½
        const bgMusic = document.getElementById('bgMusic');
        const musicBtn = document.getElementById('musicBtn');
        const musicIcon = document.getElementById('musicIcon');
        const volumeSlider = document.getElementById('volumeSlider');
        const volumeControl = document.getElementById('volumeControl');
        let isPlaying = false;
        let volumeSliderTimeout;

        // è®¾ç½®åˆå§‹éŸ³é‡
        bgMusic.volume = 0.5;

        // åˆ‡æ¢éŸ³ä¹æ’­æ”¾/æš‚åœ
        function toggleMusic() {
            if (isPlaying) {
                bgMusic.pause();
                musicBtn.classList.remove('rotating');
                musicIcon.innerText = 'ğŸµ';
                isPlaying = false;
            } else {
                bgMusic.play().then(() => {
                    musicBtn.classList.add('rotating');
                    musicIcon.innerText = 'â¸ï¸';
                    isPlaying = true;
                }).catch(err => {
                    console.log('æ’­æ”¾å¤±è´¥ï¼Œéœ€è¦ç”¨æˆ·äº¤äº’:', err);
                    alert('ç‚¹å‡»ä»»æ„å¤„åå†è¯•ä¸€æ¬¡å“¦~');
                });
            }
        }

        // æ”¹å˜éŸ³é‡
        function changeVolume() {
            const volume = volumeControl.value / 100;
            bgMusic.volume = volume;

            // é‡ç½®è¶…æ—¶ï¼Œ3ç§’åéšè—éŸ³é‡æ»‘å—
            clearTimeout(volumeSliderTimeout);
            volumeSliderTimeout = setTimeout(() => {
                volumeSlider.classList.remove('show');
            }, 3000);
        }

        // é•¿æŒ‰éŸ³ä¹æŒ‰é’®æ˜¾ç¤ºéŸ³é‡æ§åˆ¶
        musicBtn.addEventListener('mousedown', () => {
            volumeSlider.classList.add('show');
        });
        musicBtn.addEventListener('touchstart', (e) => {
            e.preventDefault();
            volumeSlider.classList.add('show');
        });

        // ç‚¹å‡»å…¶ä»–åœ°æ–¹éšè—éŸ³é‡æ»‘å—
        document.addEventListener('click', (e) => {
            if (!musicBtn.contains(e.target) && !volumeSlider.contains(e.target)) {
                volumeSlider.classList.remove('show');
            }
        });

        // æ£€æŸ¥æµè§ˆå™¨è‡ªåŠ¨æ’­æ”¾ç­–ç•¥
        document.addEventListener('DOMContentLoaded', () => {
            // å°è¯•è‡ªåŠ¨æ’­æ”¾ï¼ˆå¯èƒ½ä¼šè¢«æµè§ˆå™¨é˜»æ­¢ï¼‰
            bgMusic.play().then(() => {
                musicBtn.classList.add('rotating');
                musicIcon.innerText = 'â¸ï¸';
                isPlaying = true;
            }).catch(() => {
                // è‡ªåŠ¨æ’­æ”¾è¢«é˜»æ­¢ï¼Œç­‰å¾…ç”¨æˆ·äº¤äº’
                console.log('ç­‰å¾…ç”¨æˆ·ç‚¹å‡»æ’­æ”¾éŸ³ä¹');
            });
        });

        // ç¥ç¦è¯­é¢˜åº“ (ç²¾é€‰20æ¡)
        const greetings = [
            "æ–°æ˜¥å¿«ä¹ï¼ç¥æ‚¨èº«ä½“å¥åº·ï¼Œä¸‡äº‹å¦‚æ„ï¼Œç¬‘å£å¸¸å¼€ï¼Œé˜–å®¶å¹¸ç¦ï¼",
            "è¿‡å¹´å¥½ï¼æ„¿æ‚¨æ–°çš„ä¸€å¹´ï¼šåƒå¾—å¥½ï¼Œç¡å¾—é¦™ï¼Œæ²¡çƒ¦æ¼ï¼Œç¦æ°”æ—ºï¼",
            "é‡‘è›‡èˆæ˜¥é£ï¼Œç»™æ‚¨æ‹œå¹´å•¦ï¼ç¥æ‚¨å’Œå®¶äººå¹³å¹³å®‰å®‰ï¼Œé¡ºé¡ºåˆ©åˆ©ï¼",
            "ç¥æ‚¨æ–°çš„ä¸€å¹´ï¼šèº«ä½“ç¡¬æœ—æœ—ï¼Œå¿ƒæƒ…å–œæ´‹æ´‹ï¼Œæ—¥å­çº¢ç«ç«ï¼",
            "æ˜¥èŠ‚åˆ°ï¼Œç¦æ°”åˆ°ï¼ç¥æ‚¨ç¦å¦‚ä¸œæµ·é•¿æµæ°´ï¼Œå¯¿æ¯”å—å±±ä¸è€æ¾ï¼",
            "ç»™æ‚¨æ‹œä¸ªæ—©å¹´ï¼æ„¿æ–°çš„ä¸€å¹´é‡Œï¼Œå¥½äº‹æ¥äºŒè¿ä¸‰ï¼Œå¿ƒæƒ…å››å­£å¦‚æ˜¥ï¼",
            "æ–°æ˜¥å¤§å‰ï¼ç¥æ‚¨ï¼šå¿ƒæƒ³äº‹æˆï¼Œå²å²å¹³å®‰ï¼Œå¹´å¹´æœ‰ä½™ï¼",
            "ç¥æ‚¨æ–°å¹´å¿«ä¹ï¼æ„¿æ‚¨æ¯å¤©éƒ½ç²¾ç¥ç™¾å€ï¼Œå¼€å¼€å¿ƒå¿ƒï¼Œå¥å¥åº·åº·ï¼",
            "è¿‡å¹´å•¦ï¼ç¥æ‚¨è€å½“ç›Šå£®ï¼Œç²¾ç¥çŸé“„ï¼Œå„¿å­™æ»¡å ‚ï¼Œä¹äº«å¤©ä¼¦ï¼",
            "æ–°çš„ä¸€å¹´ï¼Œç¥æ‚¨è…¿è„šçµä¾¿ï¼Œç‰™å£å¥½ï¼Œåƒå˜›å˜›é¦™ï¼Œèº«ä½“å€å„¿æ£’ï¼",
            "ç»™æ‚¨é€ç¦å•¦ï¼æ„¿æ‚¨æ–°çš„ä¸€å¹´ï¼Œçƒ¦æ¼å…¨æ¶ˆï¼Œå¿«ä¹åŠ å€ï¼Œå¹¸ç¦å®‰åº·ï¼",
            "æ˜¥èŠ‚å¿«ä¹ï¼ç¥æ‚¨å‰ç¥¥å¦‚æ„ï¼ŒèŠ±å¼€å¯Œè´µï¼Œç”Ÿæ´»ç¾æ»¡ï¼Œå¥½è¿è¿è¿ï¼",
            "ç¥æ‚¨ï¼šæ–°æ˜¥å¿«ä¹ï¼Œå¤§å‰å¤§åˆ©ï¼æ„¿æ‚¨å¤©å¤©å¼€å¿ƒï¼Œäº‹äº‹é¡ºå¿ƒï¼",
            "æ‹œå¹´å•¦ï¼ç¥æ‚¨å’Œè€ä¼´å„¿ï¼šèº«ä½“å¥åº·ï¼Œæ©æ©çˆ±çˆ±ï¼Œç™½å¤´å•è€ï¼",
            "ç¥æ‚¨æ–°å¹´æ–°æ°”è±¡ï¼Œçº¢çº¢ç«ç«è¿‡å¤§å¹´ï¼Œå¹³å¹³å®‰å®‰ä¸€è¾ˆå­ï¼",
            "æ„¿æ‚¨æ–°çš„ä¸€å¹´ï¼šå¤šå–œä¹ï¼Œé•¿å®‰å®ï¼Œå²æ— å¿§ï¼Œä¹…å®‰åº·ï¼",
            "æ–°æ˜¥ä½³èŠ‚åˆ°ï¼Œç¥æ‚¨ï¼šç¦æ°”æ»¡æ»¡ï¼Œè´¢æ°”æ»šæ»šï¼Œå–œæ°”æ´‹æ´‹ï¼",
            "ç»™æ‚¨æ‹œå¹´äº†ï¼ç¥æ‚¨è¶Šæ´»è¶Šå¹´è½»ï¼Œè¶Šæ´»è¶Šå¼€å¿ƒï¼Œè¶Šæ´»è¶Šç²¾å½©ï¼",
            "ç¥æ‚¨æ–°çš„ä¸€å¹´ï¼šæ— ç—…æ— ç¾ï¼Œæ— å¿§æ— è™‘ï¼Œå¼€å¼€å¿ƒå¿ƒè¿‡å¥½æ¯ä¸€å¤©ï¼",
            "æ–°å¹´å¥½ï¼ç¥æ‚¨é˜–å®¶å›¢åœ†ï¼Œå¹¸ç¦ç¾æ»¡ï¼Œé¾™é©¬ç²¾ç¥ï¼Œä¸‡äº‹é¡ºé‚ï¼"
        ];

        let lastIndex = -1;

        // åˆå§‹åŒ–
        window.onload = function() {
            newGreeting();
        };

        // éšæœºåˆ‡æ¢ç¥ç¦è¯­
        function newGreeting() {
            const textEl = document.getElementById('greeting-text');
            const cardEl = document.getElementById('card');
            
            // ç®€å•çš„é˜²é‡å¤é€»è¾‘
            let index;
            do {
                index = Math.floor(Math.random() * greetings.length);
            } while (index === lastIndex && greetings.length > 1);
            
            lastIndex = index;
            
            // åŠ¨ç”»æ•ˆæœ
            textEl.style.opacity = 0;
            setTimeout(() => {
                textEl.innerText = greetings[index];
                textEl.style.opacity = 1;
                // æ·»åŠ ä¸€æ¬¡è·³åŠ¨åŠ¨ç”»
                cardEl.classList.remove('fade-in');
                void cardEl.offsetWidth; // è§¦å‘é‡ç»˜
                cardEl.classList.add('fade-in');
            }, 200);
        }

        // å¤åˆ¶åŠŸèƒ½
        function copyGreeting() {
            const text = document.getElementById('greeting-text').innerText;
            
            // å°è¯•ä½¿ç”¨ç°ä»£ API
            if (navigator.clipboard && navigator.clipboard.writeText) {
                navigator.clipboard.writeText(text).then(showToast).catch(err => {
                    // é™çº§æ–¹æ¡ˆ
                    fallbackCopy(text);
                });
            } else {
                fallbackCopy(text);
            }
        }

        // é™çº§å¤åˆ¶æ–¹æ¡ˆ (å…¼å®¹è€è®¾å¤‡)
        function fallbackCopy(text) {
            const textArea = document.createElement("textarea");
            textArea.value = text;
            
            // é¿å…æ»šåŠ¨
            textArea.style.position = "fixed";
            textArea.style.left = "-9999px";
            textArea.style.top = "0";
            
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
                const successful = document.execCommand('copy');
                if (successful) showToast();
                else alert('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨é•¿æŒ‰æ–‡å­—å¤åˆ¶å“¦~');
            } catch (err) {
                alert('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨é•¿æŒ‰æ–‡å­—å¤åˆ¶å“¦~');
            }
            
            document.body.removeChild(textArea);
        }

        // æ˜¾ç¤º Toast æç¤º
        function showToast() {
            const toast = document.getElementById('toast');
            toast.style.display = 'block';
            setTimeout(() => {
                toast.style.display = 'none';
            }, 3000);
        }
    </script>
</body>
</html>