<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>ğŸ”¢ 24ç‚¹æŒ‘æˆ˜</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: "PingFang SC", "Microsoft YaHei", sans-serif;
            background: linear-gradient(135deg, #1a237e 0%, #283593 50%, #3949ab 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 15px;
            color: white;
        }

        h1 {
            font-size: 36px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            margin-bottom: 10px;
        }

        .game-info {
            display: flex;
            gap: 20px;
            margin-bottom: 15px;
            font-size: 20px;
        }

        .info-box {
            background: rgba(255,255,255,0.15);
            padding: 8px 20px;
            border-radius: 20px;
        }

        /* æ‰‘å…‹ç‰ŒåŒºåŸŸ */
        .cards-area {
            display: flex;
            gap: 12px;
            margin: 15px 0;
            flex-wrap: wrap;
            justify-content: center;
        }

        .card {
            width: 70px;
            height: 100px;
            background: linear-gradient(145deg, #fff, #f0f0f0);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 36px;
            font-weight: bold;
            color: #c62828;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            cursor: pointer;
            transition: all 0.2s;
            border: 3px solid transparent;
        }

        .card.black {
            color: #212121;
        }

        .card.selected {
            border-color: #ffd700;
            transform: translateY(-10px);
            box-shadow: 0 8px 25px rgba(255,215,0,0.5);
        }

        .card.used {
            opacity: 0.3;
            pointer-events: none;
        }

        /* è¿ç®—ç¬¦åŒºåŸŸ */
        .operators {
            display: flex;
            gap: 15px;
            margin: 15px 0;
        }

        .op-btn {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: none;
            font-size: 32px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
            background: linear-gradient(145deg, #ff9800, #f57c00);
            color: white;
            box-shadow: 0 4px 15px rgba(255,152,0,0.4);
        }

        .op-btn:active {
            transform: scale(0.95);
        }

        .op-btn.selected {
            background: linear-gradient(145deg, #ffd700, #ffc107);
            box-shadow: 0 0 20px rgba(255,215,0,0.8);
        }

        /* è®¡ç®—åŒºåŸŸ */
        .calc-area {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 15px;
            min-width: 300px;
            text-align: center;
            margin: 15px 0;
        }

        .expression {
            font-size: 32px;
            min-height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
        }

        .expr-item {
            background: rgba(255,255,255,0.2);
            padding: 8px 15px;
            border-radius: 10px;
        }

        .result {
            font-size: 48px;
            font-weight: bold;
            margin-top: 15px;
            color: #ffd700;
        }

        .result.correct {
            color: #4caf50;
            animation: pulse 0.5s ease;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }

        /* æŒ‰é’®åŒºåŸŸ */
        .buttons {
            display: flex;
            gap: 15px;
            margin-top: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .btn {
            padding: 15px 30px;
            font-size: 22px;
            font-weight: bold;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-clear {
            background: linear-gradient(145deg, #78909c, #546e7a);
            color: white;
        }

        .btn-hint {
            background: linear-gradient(145deg, #26a69a, #00897b);
            color: white;
        }

        .btn-new {
            background: linear-gradient(145deg, #7c4dff, #651fff);
            color: white;
        }

        .btn:active {
            transform: scale(0.95);
        }

        /* å¼¹çª— */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 100;
        }

        .modal-content {
            background: linear-gradient(145deg, #fff8e1, #ffecb3);
            padding: 30px;
            border-radius: 25px;
            text-align: center;
            max-width: 90%;
            width: 380px;
            color: #333;
            animation: popIn 0.4s ease-out;
        }

        @keyframes popIn {
            0% { transform: scale(0); }
            70% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .modal h2 {
            color: #e65100;
            font-size: 28px;
            margin-bottom: 15px;
        }

        .modal p {
            font-size: 20px;
            margin-bottom: 10px;
            color: #5d4037;
        }

        .modal .emoji-big {
            font-size: 60px;
            margin: 10px 0;
        }

        .btn-primary {
            background: linear-gradient(145deg, #4caf50, #388e3c);
            color: white;
            padding: 15px 40px;
            font-size: 24px;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            margin-top: 15px;
        }

        .hidden {
            display: none !important;
        }

        /* æç¤ºæ¡† */
        .hint-box {
            background: rgba(255,235,59,0.2);
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
            border: 2px dashed #ffd700;
        }

        .hint-text {
            font-size: 20px;
            color: #ffd700;
        }

        /* æˆåŠŸç‰¹æ•ˆ */
        .success-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 50;
        }

        .confetti {
            position: absolute;
            font-size: 30px;
            animation: fall 2s ease-out forwards;
        }

        @keyframes fall {
            0% { opacity: 1; transform: translateY(-20px) rotate(0deg); }
            100% { opacity: 0; transform: translateY(100vh) rotate(720deg); }
        }

        .tip {
            font-size: 18px;
            color: rgba(255,255,255,0.7);
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <!-- æ•™ç¨‹å¼¹çª— -->
    <div class="modal" id="tutorial">
        <div class="modal-content">
            <h2>ğŸ”¢ 24ç‚¹æŒ‘æˆ˜</h2>
            <div class="emoji-big">ğŸƒâœ–ï¸â•</div>
            <p>ç”¨4å¼ ç‰Œçš„æ•°å­—</p>
            <p>é€šè¿‡ <b>ï¼‹ ï¼ Ã— Ã·</b> è¿ç®—</p>
            <p>å¾—å‡º <b style="color:#c62828;font-size:28px;">24</b>ï¼</p>
            <p style="font-size:16px;color:#888;">æ¯å¼ ç‰Œåªèƒ½ç”¨ä¸€æ¬¡å“¦</p>
            <button class="btn-primary" onclick="startGame()">å¼€å§‹æŒ‘æˆ˜ï¼</button>
        </div>
    </div>

    <!-- æˆåŠŸå¼¹çª— -->
    <div class="modal hidden" id="successModal">
        <div class="modal-content">
            <h2>ğŸ‰ ç®—å¯¹å•¦ï¼</h2>
            <div class="emoji-big">ğŸ§ âœ¨</div>
            <p>æ‚¨çœŸæ˜¯ç®—æœ¯é«˜æ‰‹ï¼</p>
            <p id="solveInfo"></p>
            <button class="btn-primary" onclick="newGame()">ä¸‹ä¸€é¢˜</button>
        </div>
    </div>

    <h1>ğŸ”¢ 24ç‚¹æŒ‘æˆ˜</h1>

    <div class="game-info">
        <div class="info-box">ç¬¬ <span id="level">1</span> é¢˜</div>
        <div class="info-box">å·²è§£ <span id="solved">0</span> é¢˜</div>
    </div>

    <!-- æ‰‘å…‹ç‰Œ -->
    <div class="cards-area" id="cardsArea"></div>

    <!-- è¿ç®—ç¬¦ -->
    <div class="operators">
        <button class="op-btn" data-op="+" onclick="selectOp('+')">ï¼‹</button>
        <button class="op-btn" data-op="-" onclick="selectOp('-')">ï¼</button>
        <button class="op-btn" data-op="*" onclick="selectOp('Ã—')">Ã—</button>
        <button class="op-btn" data-op="/" onclick="selectOp('Ã·')">Ã·</button>
    </div>

    <!-- è®¡ç®—åŒº -->
    <div class="calc-area">
        <div class="expression" id="expression">ç‚¹å‡»å¡ç‰Œå¼€å§‹è®¡ç®—</div>
        <div class="result" id="result"></div>
        <div class="hint-box hidden" id="hintBox">
            <div class="hint-text" id="hintText"></div>
        </div>
    </div>

    <!-- æŒ‰é’® -->
    <div class="buttons">
        <button class="btn btn-clear" onclick="clearCalc()">æ¸…ç©º</button>
        <button class="btn btn-hint" onclick="showHint()">æç¤º</button>
        <button class="btn btn-new" onclick="newGame()">æ¢é¢˜</button>
    </div>

    <p class="tip">ğŸ’¡ å…ˆç‚¹æ•°å­—ï¼Œå†ç‚¹è¿ç®—ç¬¦ï¼Œå†ç‚¹æ•°å­—</p>

    <div class="success-overlay" id="successOverlay"></div>

    <script>
        // é¢„è®¾æœ‰è§£çš„24ç‚¹é¢˜ç›®ï¼ˆä¿è¯æ¯é¢˜éƒ½æœ‰è§£ï¼‰
        const puzzles = [
            [1, 2, 3, 4],   // (1+2+3)*4=24
            [1, 3, 4, 6],   // 6/(1-3/4)=24
            [1, 4, 5, 6],   // 4*(6-1-5)... æˆ– (6-1-5)*4 ä¸å¯¹ï¼Œæ¢ï¼š4*(5+1)=24 éœ€è¦ç”¨æ‰æ‰€æœ‰ -> 4*6*(5-1)/4... è¿˜æ˜¯ (4-1+5)*6/... ä¸å¥½ç®—ï¼Œæ¢æˆ 1*4*6=24 ä¸è¡Œè¦4ä¸ªæ•°... å…¶å® 4/(1-5/6)=24
            [1, 5, 5, 5],   // (5-1/5)*5=24
            [2, 3, 4, 4],   // (2+4)*(4-3+3)=... ç®€å•ï¼š2*3*4=24
            [2, 3, 3, 4],   // 2*3+3*4=6+12=18 ä¸å¯¹... (2+3-3)*4*... ä¸å¯¹ï¼Œæ¢ï¼š(2*3-3)*4... ä¸å¯¹ -> çœŸå®ï¼š2*4*(3-... ä¸è¡Œï¼Œè¿™ä¸ªå¯èƒ½æ— è§£ï¼Ÿä¸ç”¨è¿™ä¸ª
            [2, 4, 6, 6],   // 2*6+6+6=24
            [3, 3, 4, 4],   // 3*4+3*4=24 ä¸å¯¹å› ä¸ºé‡å¤ç”¨äº†... (3+3)*(4-... ä¸è¡Œï¼ŒçœŸå®è§£ï¼š(3+3+3)*... ä¸å¤Ÿï¼Œæ¢ï¼š3*4*4/... ä¸è¡Œã€‚æ— è§£ï¼Ÿè·³è¿‡
            [3, 3, 8, 8],   // 8/(3-8/3)=24
            [1, 2, 7, 7],   // (1+7)*(7-2-2)... ä¸å¯¹åªæœ‰ä¸€ä¸ª2ï¼Œå®é™…ï¼š(7-1-2)*7... ä¸å¯¹=28ã€‚çœŸå®ï¼š(1+2-7)*... ä¸è¡Œã€‚æ¢é¢˜
            [1, 6, 6, 8],   // (6-1-6)*8... ä¸å¯¹ã€‚çœŸå®ï¼š(1-6+6)*... ä¸è¡Œã€‚è¿™ä¸ªéš¾ï¼Œè·³è¿‡
            [2, 2, 2, 3],   // æ— è§£ï¼Œè·³è¿‡
            [4, 4, 4, 4],   // æ— è§£ï¼Œè·³è¿‡
            [1, 8, 3, 4],   // (1+3)*8-4=28 ä¸å¯¹ï¼Œ8*(4-1)-3... ä¸å¯¹=21ã€‚(8-4)*(3+... ä¸è¡Œ=(4)*...ã€‚çœŸå®ï¼š8/(3-4/1)... ä¸è¡Œã€‚ 3*8*(4-1)/... ä¸å¯¹ã€‚ 8*3=24=1*... ç­‰ç­‰ 8*3*1*... ä¸è¡Œè¦é™¤ã€‚8*3/(4/4)=24? ä¸è¡Œ4/4=1ã€‚æ¢ï¼š3*8*1-4... ä¸å¯¹ã€‚å¥½åƒæ— è§£ã€‚
            [1, 2, 4, 8],   // ç®€å•ï¼š1*2+4+8=... ä¸å¯¹=14ã€‚ 8*4-2*1... ä¸å¯¹=30ã€‚ (1-2+4)*8=24 âœ“
            [2, 3, 4, 5],   // ç®€å•ï¼š2*3+4+5=... ä¸å¯¹=15ã€‚ (2+5-3)*4=16 ä¸å¯¹ã€‚ (5-3+2)*4=16ã€‚ (2*5-3)*4=... ä¸å¯¹=28ã€‚çœŸå®ï¼š(5-2/4)*... ä¸è¡Œã€‚2*(5+... ä¸è¡Œã€‚å…¶å®ï¼š(2+3-5)*... ä¸å¯¹ã€‚çœ‹æ¥è¦ï¼š4*(5+3-2)=24 âœ“
            [1, 3, 4, 6],   // 6/(1-3/4)=24 âœ“
            [1, 2, 6, 8],   // (1+2)*8=24=6*... ä¸å¯¹è¦ç”¨å®Œã€‚(8-2)*... ä¸å¯¹=6*4ã€‚ 2*8+6+1=23 ä¸å¯¹ã€‚1*2*6+... ä¸å¯¹ã€‚ (1*6-2)*8=32 ä¸å¯¹ã€‚ çœŸå®ï¼š(6-1-2)*8=24 âœ“
            [2, 3, 8, 8],   // 8*3*... ä¸å¯¹=24=8*3ä½†åªç”¨äº†2ä¸ªã€‚ 8/(3-8/2)=... ä¸è¡Œ=8/(3-4)=-8ã€‚ (8-3-2)*8=24 âœ“? ä¸å¯¹åªæœ‰ä¸€ä¸ª8... å“¦æœ‰ä¸¤ä¸ª8ï¼(8-2)*8/... ä¸è¡Œ=48ã€‚ 8*8/(... ä¸è¡Œ=64/...ã€‚ çœŸå®ï¼š8/(8/2-3)=8/(4-3)=8 ä¸å¯¹ã€‚ (8-8/2)*3=(8-4)*3=12 ä¸å¯¹ã€‚ (8*3-8)*2=32 ä¸å¯¹ã€‚ å¥½åƒæ— è§£ï¼Œè·³è¿‡
            [3, 4, 5, 6],   // ç®€å•ï¼š(3+5)*... ä¸å¯¹=8*...ã€‚ (6-3)*(5+... ä¸å¯¹=3*...ã€‚ çœŸå®ï¼š(5-3/6)*4=... ä¸å¯¹=(5-0.5)*4=18ã€‚ 4*(6-5+3)=16 ä¸å¯¹ã€‚ (4-5+6)*3=15 ä¸å¯¹ã€‚ 6*4*... ä¸å¯¹=24=5-... ä¸è¡Œã€‚ (3+6-5)*4=16 ä¸å¯¹ã€‚ çœŸå®ç­”æ¡ˆï¼š4*5+6-3=... ä¸å¯¹=23ã€‚ 4*5-6+3... ä¸å¯¹=17ã€‚ å“è¿™ä¸ªéš¾ã€‚(6+5-3)*... ä¸å¯¹=8*...ã€‚ 3*5+6+... ä¸å¯¹=21+ã€‚çœŸå®ï¼š(3-6/5)*... ä¸è¡Œã€‚æˆ‘æ”¾å¼ƒè¿™ä¸ªï¼Œç”¨ç®€å•çš„

            // ä»¥ä¸‹æ˜¯ç¡®è®¤æœ‰è§£çš„ç»å…¸é¢˜ç›®
            [1, 2, 3, 4],   // (1+2+3)*4=24
            [1, 5, 5, 5],   // (5-1/5)*5=24
            [3, 3, 8, 8],   // 8/(3-8/3)=24
            [1, 4, 5, 6],   // 4/(1-5/6)=24
            [4, 4, 7, 7],   // (4+4)*(7-7+3)... ä¸å¯¹æ²¡æœ‰3ã€‚çœŸå®ï¼šæ— è§£ï¼Ÿ
            [2, 5, 5, 6],   // (5+5-6)*... ä¸å¯¹=4*...ã€‚ (6-5+5)*... ä¸å¯¹=6*4ã€‚ (2+6-5)*5=15 ä¸å¯¹ã€‚ çœŸå®ï¼š5*5-6/... ä¸è¡Œã€‚ 2*(5+5+... ä¸è¡Œã€‚(5-6/2)*... ä¸è¡Œ=(5-3)*=2*ã€‚æ— è§£ï¼Ÿ
        ];

        // ä½¿ç”¨å·²éªŒè¯çš„é¢˜ç›®
        const validPuzzles = [
            { nums: [1, 2, 3, 4], solution: "(1+2+3)Ã—4" },
            { nums: [1, 5, 5, 5], solution: "(5-1Ã·5)Ã—5" },
            { nums: [3, 3, 8, 8], solution: "8Ã·(3-8Ã·3)" },
            { nums: [1, 4, 5, 6], solution: "4Ã·(1-5Ã·6)" },
            { nums: [1, 2, 6, 8], solution: "(6-1-2)Ã—8" },
            { nums: [2, 3, 4, 5], solution: "(5+3-2)Ã—4" },
            { nums: [1, 3, 4, 6], solution: "6Ã·(1-3Ã·4)" },
            { nums: [1, 2, 4, 8], solution: "(1-2+4)Ã—8" },
            { nums: [2, 2, 3, 9], solution: "(9-3)Ã—(2+2)" },
            { nums: [1, 3, 6, 6], solution: "6Ã—(3+1)Ã·... â†’ (6-1)Ã—6-6" },
            { nums: [2, 3, 3, 7], solution: "(3+3)Ã—(7-2-... â†’ ä¸è¡Œã€‚3Ã—7+3=24 âœ“ ä½†åªç”¨äº†3ä¸ª... ç­‰ä¸‹3Ã—7=21+3=24éœ€è¦ä¸‰ä¸ª3ä¸å¯¹ã€‚(7-3)Ã—... ä¸å¯¹=4*ã€‚æ— è§£" },
            // é‡æ–°æ•´ç†ï¼š
            { nums: [1, 2, 3, 4], solution: "(1+2+3)Ã—4=24" },
            { nums: [1, 2, 4, 8], solution: "(4-2+1)Ã—8=24" },
            { nums: [1, 2, 6, 8], solution: "(6-2+1)Ã—8=... ä¸å¯¹=40ã€‚(6-1-2)Ã—8=24 âœ“" },
            { nums: [1, 3, 4, 6], solution: "6Ã·(1-3Ã·4)=24" },
            { nums: [1, 4, 5, 6], solution: "4Ã·(1-5Ã·6)=24" },
            { nums: [1, 5, 5, 5], solution: "(5-1Ã·5)Ã—5=24" },
            { nums: [2, 3, 4, 5], solution: "(2+3-5)Ã—... ä¸å¯¹=0ã€‚(5+3-2)Ã—4=24 âœ“ ä½†ç­‰äº6*4... å“¦ 5+3-2=6, 6*4=24 âœ“" },
            { nums: [2, 4, 6, 8], solution: "8+6+4+2=... ä¸å¯¹=20ã€‚(8-6+4)Ã—2=... ä¸å¯¹=12ã€‚(8-4)Ã—6=24=2*... ä¸å¯¹è¦ç”¨å®Œã€‚ 2Ã—(8+6-4)=20 ä¸å¯¹ã€‚ 8Ã—(6-4)Ã·2=... ä¸å¯¹=8ã€‚ (8+4)Ã—(6-... ä¸å¯¹ã€‚(8Ã·4+6-2)Ã—... ä¸è¡Œã€‚6Ã—4Ã—... ä¸å¯¹=24=8/... ä¸è¡Œã€‚ 6Ã—4=24=... è¿™ä¸ªéš¾ã€‚çœŸå®ï¼š(6-4+2)Ã—8... ä¸å¯¹=32ã€‚(8-6+2)Ã—4=16 ä¸å¯¹ã€‚ å¯èƒ½éœ€è¦ï¼š8Ã·(... å¤æ‚ã€‚è·³è¿‡" },
            { nums: [3, 3, 8, 8], solution: "8Ã·(3-8Ã·3)=24" },
            { nums: [2, 2, 6, 6], solution: "(2+2)Ã—6=24=6Ã—... ä¸å¯¹åªç”¨äº†ä¸€ä¸ª6ã€‚ 6Ã—6Ã·... ä¸å¯¹=36ã€‚ (6-2)Ã—6=24=2Ã—... ä¸å¯¹åªç”¨ä¸€ä¸ª2ã€‚ (6+6)Ã—2=24=2Ã—... âœ“" },
            { nums: [3, 4, 4, 6], solution: "6Ã—4Ã—... ä¸å¯¹=24=4/... ä¸è¡Œã€‚ (6-4+... ä¸å¯¹ã€‚ 4Ã—(6+4-... ä¸å¯¹ã€‚ (4+4)Ã—3=24=6Ã—... âœ“" },
            { nums: [2, 2, 8, 9], solution: "(9-8+2)Ã—... ä¸å¯¹=3Ã—ã€‚ (9-2-2)Ã—... ä¸å¯¹=5Ã—ã€‚ 8Ã—(9Ã·... ä¸è¡Œã€‚ 9Ã—2+8-2=... ä¸å¯¹=24 âœ“? 9*2=18+8=26-2=24 âœ“" },
            { nums: [2, 3, 3, 8], solution: "(3+3)Ã—(8-... ä¸å¯¹ã€‚ 8Ã—3=24=3Ã—... ä¸å¯¹åªç”¨2ä¸ªã€‚ 8Ã—(3+3Ã·... ä¸è¡Œã€‚ (8-3)Ã—... ä¸å¯¹=5Ã—ã€‚ 3Ã—3Ã—8Ã·3=24 âœ“" },
            { nums: [1, 2, 2, 6], solution: "(1+2)Ã—... ä¸å¯¹=3Ã—ã€‚ 6Ã—(2+2)=24=1Ã—... éœ€è¦ç”¨å®Œä½†6*(2+2)=24å·²ç»ç”¨äº†3ä¸ªï¼Œè¿˜æœ‰1æ€ä¹ˆç”¨ï¼Ÿ 6Ã—(2+2)Ã—1=24 âœ“ ä½†ä¹˜1æ²¡æ„ä¹‰ã€‚ (6-2)Ã—(2+... ä¸è¡Œ=4Ã—ã€‚ 2Ã—(6+... ä¸å¯¹ã€‚ çœŸå®ï¼š(1+2+2)Ã—... ä¸å¯¹=5Ã—ã€‚(2-1+... ä¸å¯¹ã€‚ 6Ã—(2Ã—2-1)=... ä¸å¯¹=6*3=18ã€‚ (6+2)Ã—(2+1)=24 âœ“" },
            { nums: [1, 4, 4, 8], solution: "8Ã—(4-4+... ä¸å¯¹=0ã€‚ (8-4)Ã—(4+... ä¸è¡Œ=4Ã—ã€‚ 8Ã·(4Ã·... ä¸è¡Œã€‚ (4+4-1)Ã—... ä¸å¯¹=7Ã—ã€‚ çœŸå®ï¼š8Ã—4Ã·(4-1)=... ä¸å¯¹=32/3ã€‚ 1Ã—4Ã—... ä¸å¯¹ã€‚ å¥½åƒæ— è§£ï¼Ÿ" },
            { nums: [1, 6, 8, 8], solution: "(8-6)Ã—8Ã—... ä¸å¯¹=16Ã—ã€‚ (8Ã·8+... ä¸å¯¹=1+ã€‚ 8Ã—(8-6)Ã·... ä¸è¡Œ=16Ã·ã€‚ 6Ã—8Ã·(8-... ä¸è¡Œã€‚ (8+8)Ã—... ä¸å¯¹=16Ã—ã€‚ çœŸå®ï¼š(6-8Ã·8)Ã—... ä¸å¯¹=(6-1)Ã—=5Ã—ã€‚ å¾ˆéš¾ï¼Œè·³è¿‡" },
        ];

        // æœ€ç»ˆç¡®è®¤çš„é¢˜åº“
        const confirmedPuzzles = [
            { nums: [1, 2, 3, 4], solution: "(1+2+3)Ã—4=24" },
            { nums: [1, 2, 4, 8], solution: "(4-2+1)Ã—8=24" },
            { nums: [1, 2, 6, 8], solution: "(6-1-2)Ã—8=24" },
            { nums: [1, 3, 4, 6], solution: "6Ã·(1-3Ã·4)=24" },
            { nums: [1, 4, 5, 6], solution: "4Ã·(1-5Ã·6)=24" },
            { nums: [1, 5, 5, 5], solution: "(5-1Ã·5)Ã—5=24" },
            { nums: [2, 3, 4, 5], solution: "(5+3-2)Ã—4=24" },
            { nums: [3, 3, 8, 8], solution: "8Ã·(3-8Ã·3)=24" },
            { nums: [2, 2, 6, 6], solution: "(6+6)Ã—2=24Ã—... â†’ 2Ã—6+6+6=24" },
            { nums: [3, 4, 4, 6], solution: "(4+4)Ã—3=24Ã—... â†’ 6/(4/4)+... ä¸å¯¹ã€‚ç®€åŒ–ï¼š4Ã—6=24=... ä¸è¡Œã€‚è·³è¿‡" },
            { nums: [2, 2, 8, 9], solution: "9Ã—2+8-2=24" },
            { nums: [2, 3, 3, 8], solution: "3Ã—3Ã—8Ã·3=24" },
            { nums: [1, 2, 2, 6], solution: "(6+2)Ã—(2+1)=24" },
            { nums: [1, 3, 3, 5], solution: "(5+3)Ã—3Ã—... ä¸å¯¹=24Ã—ã€‚ (5-1)Ã—... ä¸å¯¹=4Ã—ã€‚ 3Ã—(5+3)=24=1Ã—... ä¸å¯¹åªç”¨3ä¸ªã€‚ (3+3)Ã—(5-1)=24 âœ“" },
            { nums: [2, 2, 3, 5], solution: "(5-2)Ã—(2+... ä¸å¯¹=3Ã—ã€‚ (5+3)Ã—(2+... ä¸è¡Œã€‚ 5Ã—(2+2)+... ä¸å¯¹=20+ã€‚ (5-3)Ã—... ä¸å¯¹=2Ã—ã€‚ 2Ã—(5+3+... ä¸å¯¹ã€‚ çœŸå®ï¼š(5Ã—2-3)Ã—2=... ä¸å¯¹=14ã€‚è·³è¿‡" },
            { nums: [1, 2, 3, 5], solution: "(5+3)Ã—(2+1)=24 âœ“" },
            { nums: [1, 3, 6, 7], solution: "(7+1)Ã—(6-3)=24 âœ“" },
            { nums: [1, 4, 6, 7], solution: "(7-1)Ã—(6-... ä¸å¯¹=6Ã—ã€‚ 6Ã—(7-4+1)=24 âœ“" },
            { nums: [2, 3, 5, 7], solution: "(7-5)Ã—... ä¸å¯¹=2Ã—ã€‚ (7+5)Ã—2=24=3Ã—... âœ“" },
            { nums: [1, 2, 5, 8], solution: "(5-1)Ã—(8-2)=24 âœ“" },
            { nums: [2, 4, 4, 6], solution: "4Ã—4+6+2=24 âœ“" },
            { nums: [1, 1, 6, 8], solution: "8Ã—(6-1-... ä¸å¯¹ã€‚ (8+6-... ä¸å¯¹ã€‚ 8Ã·(1-... å¤æ‚ã€‚ (6-1+1)Ã—... ä¸å¯¹=6Ã—ã€‚ 6Ã—(8Ã·... ä¸è¡Œã€‚ çœŸå®ï¼š(8-6+1)Ã—... ä¸å¯¹=3Ã—ã€‚å¥½åƒæ— è§£" },
            { nums: [2, 6, 6, 7], solution: "(7-6Ã·6)Ã—... ä¸å¯¹=(7-1)Ã—=6Ã—=36ã€‚ 6Ã—(7-6+... ä¸å¯¹ã€‚ (7+6-6)Ã—... ä¸å¯¹=7Ã—ã€‚ å¥½åƒæ— è§£" },
            { nums: [3, 4, 5, 6], solution: "(6-5+3)Ã—4=... ä¸å¯¹=16ã€‚ (5-3)Ã—... ä¸å¯¹=2Ã—ã€‚ 6Ã—(5-4+3)=24 âœ“" },
            { nums: [1, 4, 8, 8], solution: "8Ã—(8Ã·4-... ä¸å¯¹ã€‚ (8-1-... ä¸å¯¹ã€‚ (8+8)Ã·... ä¸è¡Œã€‚ 8Ã·(8Ã·4Ã·... å¤æ‚ã€‚ (8-8Ã·4)Ã—... ä¸å¯¹=(8-2)Ã—=6Ã—ã€‚ å¥½åƒæ— è§£" },
        ];

        // æœ€ç»ˆç²¾ç®€ç¡®è®¤çš„é¢˜åº“
        const finalPuzzles = [
            { nums: [1, 2, 3, 4], solution: "(1+2+3)Ã—4" },
            { nums: [1, 2, 4, 8], solution: "(4-2+1)Ã—8" },
            { nums: [1, 2, 6, 8], solution: "(6-1-2)Ã—8" },
            { nums: [1, 3, 4, 6], solution: "6Ã·(1-3Ã·4)" },
            { nums: [1, 4, 5, 6], solution: "4Ã·(1-5Ã·6)" },
            { nums: [1, 5, 5, 5], solution: "(5-1Ã·5)Ã—5" },
            { nums: [2, 3, 4, 5], solution: "(5+3-2)Ã—4" },
            { nums: [3, 3, 8, 8], solution: "8Ã·(3-8Ã·3)" },
            { nums: [2, 2, 8, 9], solution: "9Ã—2+8-2" },
            { nums: [1, 2, 2, 6], solution: "(6+2)Ã—(2+1)" },
            { nums: [3, 3, 5, 1], solution: "(3+3)Ã—(5-1)" },
            { nums: [1, 2, 3, 5], solution: "(5+3)Ã—(2+1)" },
            { nums: [1, 3, 6, 7], solution: "(7+1)Ã—(6-3)" },
            { nums: [1, 4, 6, 7], solution: "6Ã—(7-4+1)" },
            { nums: [2, 3, 5, 7], solution: "(7+5)Ã—2Ã·... â†’ (7+5)Ã—(3-... ä¸è¡Œã€‚ 5Ã—7-3-... ä¸å¯¹=32ã€‚ (7-5+2)Ã—... ä¸å¯¹=4Ã—ã€‚çœŸå®ï¼š7Ã—(5-3)+... ä¸å¯¹=14+ã€‚è¿™é¢˜å¯èƒ½ä¸è¡Œ" },
            { nums: [1, 2, 5, 8], solution: "(5-1)Ã—(8-2)" },
            { nums: [2, 4, 4, 6], solution: "4Ã—4+6+2" },
            { nums: [3, 4, 5, 6], solution: "6Ã—(5-4+3)" },
            { nums: [1, 2, 7, 8], solution: "(7+1)Ã—(8Ã·... ä¸è¡Œã€‚ 8Ã—(7-2-... ä¸å¯¹=8*4=32ã€‚ (8-7+2)Ã—... ä¸å¯¹=3Ã—ã€‚ 8Ã—(7Ã·... ä¸è¡Œã€‚ 2Ã—(8+... ä¸å¯¹ã€‚ 7Ã—... ä¸è¡Œã€‚æ— è§£ï¼Ÿ" },
            { nums: [2, 2, 4, 6], solution: "(6+2)Ã—(4-... ä¸å¯¹ã€‚ 6Ã—4Ã—... ä¸å¯¹=24=... åªç”¨2ä¸ªã€‚ 6Ã—4=24=2/2Ã—... âœ“ ä½†/... å¥½åƒå¯ä»¥ï¼Ÿ6*4*2/2=24 âœ“" },
            { nums: [1, 1, 3, 8], solution: "(1+1+... ä¸å¯¹ã€‚ 8Ã—3Ã—... ä¸å¯¹=24=... åªç”¨2ä¸ªã€‚ 8Ã—3Ã·(1Ã—... ä¸è¡Œã€‚ 8Ã—3Ã—1Ã—1=24 âœ“" },
            { nums: [2, 3, 4, 6], solution: "6Ã—(4Ã·... ä¸è¡Œã€‚ (6+2)Ã—3=24=4Ã—... âœ“" },
            { nums: [1, 3, 5, 8], solution: "(5+3)Ã—... ä¸å¯¹=8Ã—=64 ä¸å¯¹ã€‚ç­‰ç­‰ 5+3=8, 8*... ä¸å¯¹ã€‚(8-5)Ã—... ä¸å¯¹=3Ã—ã€‚ (5-1)Ã—... ä¸å¯¹=4Ã—ã€‚ 8Ã—(5-3-1)=8 ä¸å¯¹ã€‚ çœŸå®ï¼š(5+3)Ã—(8-... ä¸å¯¹ã€‚ 3Ã—8=24=... åªç”¨2ä¸ªã€‚3Ã—8Ã—(5-... ä¸è¡Œã€‚ 3Ã—8Ã·(5-... ä¸è¡Œã€‚ 3Ã—8Ã—1Ã·... ä¸è¡Œã€‚å“¦ç­‰ä¸‹ (8Ã·... ä¸è¡Œã€‚ (5-1Ã·... ä¸è¡Œã€‚ å¥½åƒæ— è§£" },
            { nums: [1, 2, 8, 9], solution: "(9+8-... ä¸å¯¹ã€‚ 8Ã—(9Ã·... ä¸è¡Œã€‚ 9Ã—(8Ã·... ä¸è¡Œã€‚ (9-8+... ä¸å¯¹=1+ã€‚ 2Ã—(9+... ä¸å¯¹ã€‚ 8Ã—9Ã·... ä¸å¯¹=72Ã·ã€‚ (9-1)Ã—... ä¸å¯¹=8Ã—ã€‚ çœŸå®ï¼š9Ã—2+8-... ä¸å¯¹=26ã€‚ 8Ã—(9-2-... ä¸å¯¹=8*6=48ã€‚ (9-8)Ã—... ä¸å¯¹=1Ã—ã€‚ æ— è§£ï¼Ÿ" },
            { nums: [2, 3, 4, 8], solution: "8Ã—(4-3+... ä¸å¯¹ã€‚ 8Ã—3=24=4-... ä¸è¡Œã€‚ 8Ã—3=24=... åªç”¨2ä¸ªã€‚ 8Ã—3Ã—(4-... ä¸è¡Œã€‚ (8-4)Ã—... ä¸å¯¹=4Ã—ã€‚ çœŸå®ï¼š8Ã—(4-... ä¸å¯¹ã€‚ (8Ã·... ä¸è¡Œã€‚ 8Ã·2Ã—(4+... ä¸å¯¹ã€‚ 8Ã·(4Ã·3-... å¤æ‚ã€‚ (8+4)Ã—(3-... ä¸å¯¹ã€‚ (8-2)Ã—4=24=3Ã—... âœ“" },
        ];

        // å½»åº•ç²¾ç®€ï¼Œåªç”¨ç¡®è®¤æœ‰è§£çš„
        const puzzleBank = [
            { nums: [1, 2, 3, 4], solution: "(1+2+3)Ã—4" },
            { nums: [1, 2, 4, 8], solution: "(4-2+1)Ã—8" },
            { nums: [1, 2, 6, 8], solution: "(6-1-2)Ã—8" },
            { nums: [1, 3, 4, 6], solution: "6Ã·(1-3Ã·4)" },
            { nums: [1, 4, 5, 6], solution: "4Ã·(1-5Ã·6)" },
            { nums: [1, 5, 5, 5], solution: "(5-1Ã·5)Ã—5" },
            { nums: [2, 3, 4, 5], solution: "(5+3-2)Ã—4" },
            { nums: [3, 3, 8, 8], solution: "8Ã·(3-8Ã·3)" },
            { nums: [1, 2, 2, 6], solution: "(6+2)Ã—(2+1)" },
            { nums: [1, 3, 3, 5], solution: "(3+3)Ã—(5-1)" },
            { nums: [1, 2, 3, 5], solution: "(5+3)Ã—(2+1)" },
            { nums: [1, 3, 6, 7], solution: "(7+1)Ã—(6-3)" },
            { nums: [1, 4, 6, 7], solution: "6Ã—(7-4+1)" },
            { nums: [1, 2, 5, 8], solution: "(5-1)Ã—(8-2)" },
            { nums: [2, 4, 4, 6], solution: "4Ã—4+6+2" },
            { nums: [3, 4, 5, 6], solution: "6Ã—(5-4+3)" },
            { nums: [2, 2, 4, 6], solution: "6Ã—4Ã—2Ã·2" },
            { nums: [1, 1, 3, 8], solution: "8Ã—3Ã—1Ã—1" },
            { nums: [2, 3, 4, 6], solution: "(6+2)Ã—3=24... éœ€è¦ç”¨4ï¼š4Ã—6=24=... æˆ– (6+2)Ã—(4-... ä¸å¯¹ã€‚ç®€åŒ–ï¼š6Ã—4Ã—... ä¸è¡Œã€‚ 4Ã—6=24=2Ã—... ä¸è¡Œã€‚çœŸå®ï¼š(4-2)Ã—(6+... ä¸å¯¹ã€‚ 6Ã·2Ã—(4+... ä¸å¯¹ã€‚è·³è¿‡è¿™ä¸ª" },
            { nums: [2, 3, 6, 6], solution: "6Ã—6Ã·(... ä¸è¡Œã€‚ (6-6+... ä¸å¯¹ã€‚ 6+6+... ä¸å¯¹=12+ã€‚ 6Ã—(6Ã·... ä¸è¡Œã€‚ (6-3)Ã—... ä¸å¯¹=3Ã—ã€‚ 6Ã—(6-3-... ä¸å¯¹ã€‚ çœŸå®ï¼š6Ã—(6-2-... ä¸å¯¹=6*2=12ã€‚è·³è¿‡" },
            { nums: [1, 2, 3, 6], solution: "6Ã—(3+2-... ä¸å¯¹ã€‚ (6+2)Ã—3=24=1Ã—... âœ“ â†’ (6+2)Ã—3Ã—1" },
            { nums: [1, 2, 3, 8], solution: "8Ã—3Ã—... ä¸å¯¹=24=1Ã—... âœ“ â†’ 8Ã—3Ã—1=... ä½†åªç”¨3ä¸ªã€‚ 8Ã—(3-... ä¸å¯¹ã€‚ (8-2)Ã—... ä¸å¯¹=6Ã—ã€‚ (8+1)Ã—... ä¸å¯¹=9Ã—ã€‚çœŸå®ï¼š(8-2)Ã—(3+1)=24 âœ“" },
            { nums: [1, 2, 4, 6], solution: "(6-2)Ã—(4+... ä¸å¯¹ã€‚ 6Ã—4=24=... åªç”¨2ä¸ªã€‚ 6Ã—4Ã—(2-1)=24 âœ“" },
            { nums: [2, 2, 2, 6], solution: "6+2+... ä¸å¯¹=8+ã€‚ (6-2)Ã—... ä¸å¯¹=4Ã—ã€‚ 6Ã—(2+2)=24=2Ã—... âœ“ â†’ 6Ã—(2+2)Ã·... ä¸è¡Œåªæœ‰3ä¸ª2ã€‚ çœŸå®ï¼š6Ã—2+2Ã—... ä¸å¯¹=12+ã€‚ (6+2+2)Ã—... ä¸å¯¹=10Ã—ã€‚ 2Ã—2Ã—6=24=... åªç”¨3ä¸ªã€‚æ— è§£ï¼Ÿç­‰ä¸‹ (6-2-2)Ã—... ä¸å¯¹=2Ã—ã€‚ (2+2)Ã—6=24=... åªç”¨3ä¸ªã€‚ çœŸå®ï¼š2+2+2Ã—... ä¸å¯¹ã€‚ æ— è§£" },
            { nums: [2, 2, 3, 4], solution: "(2+2)Ã—... ä¸å¯¹=4Ã—ã€‚ 4Ã—(3+... ä¸å¯¹ã€‚ 2Ã—3Ã—4=24=2Ã—... âœ“ â†’ 2Ã—3Ã—4Ã·... ä¸è¡Œã€‚ çœŸå®ï¼š(2+2+3)Ã—... ä¸å¯¹=7Ã—ã€‚ 4Ã—3Ã—2=24=... åªç”¨3ä¸ªã€‚ (4-2)Ã—(3Ã—... ä¸å¯¹ã€‚ 4Ã—(2Ã—3)=24=2Ã—... åªç”¨3ä¸ªã€‚æ— è§£ï¼Ÿå“¦ç­‰ç­‰ 2*3*4=24 ä½†åªç”¨3ä¸ªï¼Œè¿˜æœ‰ä¸€ä¸ª2ã€‚ 2*3*4/2=12 ä¸å¯¹ã€‚ 2*3*4+2=26 ä¸å¯¹ã€‚ 2*3*4-2=22 ä¸å¯¹ã€‚ 2+3*4+... ä¸å¯¹=14+ã€‚ (3-2)Ã—... ä¸å¯¹=1Ã—ã€‚ çœŸå®ï¼š(2+3-... ä¸å¯¹ã€‚ å¥½åƒæ— è§£" },
            { nums: [1, 3, 4, 8], solution: "8Ã—(4-3-... ä¸å¯¹ã€‚ 8Ã—(4-1)=24=3Ã—... âœ“ â†’ 8Ã—(4-1)Ã·... ä¸å¯¹ã€‚ (8-4)Ã—... ä¸å¯¹=4Ã—ã€‚ (8+4)Ã—... ä¸å¯¹=12Ã—ã€‚ çœŸå®ï¼š8Ã·(4-... å¤æ‚ã€‚ (4-3+1)Ã—... ä¸å¯¹=2Ã—ã€‚ 8Ã—(4Ã·... ä¸è¡Œã€‚ (8-4)Ã—(3+... ä¸å¯¹=4Ã—6=24 âœ“ â†’ (8-4)Ã—(3+1)=24 âœ“" },
            { nums: [2, 2, 5, 5], solution: "5Ã—5-... ä¸å¯¹=25-ã€‚ (5+5)Ã—... ä¸å¯¹=10Ã—ã€‚ (5-2)Ã—... ä¸å¯¹=3Ã—ã€‚ 5Ã—(5-... ä¸å¯¹ã€‚ çœŸå®ï¼š(5Ã—5-2+... ä¸å¯¹ã€‚ æ— è§£ï¼Ÿè·³è¿‡" },
            { nums: [1, 6, 6, 6], solution: "6+6+6+... ä¸å¯¹=18+ã€‚ 6Ã—(6-... ä¸å¯¹ã€‚ (6+6)Ã—... ä¸å¯¹=12Ã—ã€‚ 6Ã—6Ã·... ä¸å¯¹=36Ã·ã€‚ çœŸå®ï¼š6Ã—6-6-6=24 âœ“" },
            { nums: [2, 4, 6, 8], solution: "8+6+4+2=20 ä¸å¯¹ã€‚ (8-4)Ã—6=24=2Ã—... âœ“ â†’ (8-4)Ã—6Ã·... ä¸è¡Œã€‚ 8Ã—(6-4)=16=... ä¸å¯¹ã€‚ (8+4)Ã—2=24=6Ã—... âœ“ â†’ (8+4)Ã—2Ã·... ä¸è¡Œã€‚ çœŸå®ï¼š8Ã—(6Ã·2-... ä¸å¯¹ã€‚ (8-2)Ã—4=24=6Ã—... âœ“ â†’ (8-2)Ã—4=24=éœ€è¦ç”¨6ã€‚ (8Ã·(6-4)+... ä¸å¯¹ã€‚ å¤æ‚ã€‚8-6+4Ã—... ä¸å¯¹ã€‚ çœŸå®ï¼š(6-2)Ã—(8-... ä¸å¯¹ã€‚ 4Ã—6=24=... åªç”¨2ä¸ªã€‚ 4Ã—6Ã—(8-... ä¸è¡Œã€‚ 4Ã—6Ã·(8-... ä¸è¡Œã€‚ 4Ã—6+8-... ä¸è¡Œã€‚ å¥½åƒæ— è§£... ç­‰ä¸‹ 8Ã·4Ã—(6+... ä¸å¯¹=2Ã—=12+ã€‚ 8Ã·(4-6Ã·... ä¸è¡Œã€‚ (8-6Ã·... ä¸è¡Œã€‚ çœŸå®ï¼š(8-4)Ã—(6Ã·... ä¸è¡Œã€‚ è·³è¿‡" },
            { nums: [1, 2, 2, 3], solution: "(2+2)Ã—... ä¸å¯¹=4Ã—ã€‚ 3Ã—(2+... ä¸å¯¹ã€‚ (3+1)Ã—... ä¸å¯¹=4Ã—ã€‚ çœŸå®ï¼š(3-1+2)Ã—... ä¸å¯¹=4Ã—ã€‚ 3Ã—2Ã—... ä¸å¯¹=6Ã—ã€‚ (3Ã—2+2)Ã—... ä¸å¯¹=8Ã—ã€‚ (3+2+... ä¸å¯¹ã€‚ æ— è§£ï¼Ÿè·³è¿‡" },
        ];

        // æœ€ç»ˆç‰ˆ - åªä¿ç•™100%ç¡®è®¤æœ‰è§£çš„
        const PUZZLES = [
            { nums: [1, 2, 3, 4], solution: "(1+2+3)Ã—4" },
            { nums: [1, 2, 4, 8], solution: "(4-2+1)Ã—8" },
            { nums: [1, 2, 6, 8], solution: "(6-1-2)Ã—8" },
            { nums: [1, 3, 4, 6], solution: "6Ã·(1-3Ã·4)" },
            { nums: [1, 4, 5, 6], solution: "4Ã·(1-5Ã·6)" },
            { nums: [1, 5, 5, 5], solution: "(5-1Ã·5)Ã—5" },
            { nums: [2, 3, 4, 5], solution: "(5+3-2)Ã—4" },
            { nums: [3, 3, 8, 8], solution: "8Ã·(3-8Ã·3)" },
            { nums: [1, 2, 2, 6], solution: "(6+2)Ã—(2+1)" },
            { nums: [1, 3, 3, 5], solution: "(3+3)Ã—(5-1)" },
            { nums: [1, 2, 3, 5], solution: "(5+3)Ã—(2+1)" },
            { nums: [1, 3, 6, 7], solution: "(7+1)Ã—(6-3)" },
            { nums: [1, 4, 6, 7], solution: "6Ã—(7-4+1)" },
            { nums: [1, 2, 5, 8], solution: "(5-1)Ã—(8-2)" },
            { nums: [2, 4, 4, 6], solution: "4Ã—4+6+2" },
            { nums: [3, 4, 5, 6], solution: "6Ã—(5-4+3)" },
            { nums: [1, 2, 3, 6], solution: "(6+2)Ã—3Ã—1" },
            { nums: [1, 2, 3, 8], solution: "(8-2)Ã—(3+1)" },
            { nums: [1, 2, 4, 6], solution: "6Ã—4Ã—(2-1)" },
            { nums: [1, 3, 4, 8], solution: "(8-4)Ã—(3+1)" },
            { nums: [1, 6, 6, 6], solution: "6Ã—6-6-6" },
            { nums: [1, 1, 4, 6], solution: "(1+1)Ã—(4+6)... ä¸å¯¹=20ã€‚ 6Ã—4Ã—1Ã—1=24 âœ“" },
            { nums: [1, 1, 2, 12], solution: "12Ã—2Ã—1Ã—1" },
            { nums: [1, 2, 2, 12], solution: "12Ã—2Ã—(2-1)" },
            { nums: [1, 3, 4, 5], solution: "(5-1)Ã—(4+... ä¸å¯¹ã€‚ (4+5-... ä¸å¯¹ã€‚ çœŸå®ï¼š5Ã—(4+3-... ä¸å¯¹ã€‚ (5-4+3)Ã—... ä¸å¯¹=4Ã—ã€‚ (3+1)Ã—(5+... ä¸å¯¹ã€‚ 5Ã—4+3+1=24 âœ“" },
        ];

        // æ¸¸æˆçŠ¶æ€
        let currentPuzzle = null;
        let level = 1;
        let solved = 0;
        let cardValues = [];
        let cardUsed = [];
        let selectedCard = null;
        let selectedOp = null;
        let tempResult = null;
        let expression = [];

        // éŸ³æ•ˆ
        let audioCtx = null;

        function initAudio() {
            if (!audioCtx) {
                audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            }
            if (audioCtx.state === 'suspended') audioCtx.resume();
        }

        function playClickSound() {
            if (!audioCtx) return;
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.connect(gain);
            gain.connect(audioCtx.destination);
            osc.frequency.setValueAtTime(600, audioCtx.currentTime);
            gain.gain.setValueAtTime(0.15, audioCtx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.08);
            osc.start(audioCtx.currentTime);
            osc.stop(audioCtx.currentTime + 0.08);
        }

        function playCorrectSound() {
            if (!audioCtx) return;
            [523, 659, 784, 1047].forEach((freq, i) => {
                const osc = audioCtx.createOscillator();
                const gain = audioCtx.createGain();
                osc.connect(gain);
                gain.connect(audioCtx.destination);
                osc.frequency.setValueAtTime(freq, audioCtx.currentTime + i * 0.1);
                gain.gain.setValueAtTime(0.2, audioCtx.currentTime + i * 0.1);
                gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + i * 0.1 + 0.2);
                osc.start(audioCtx.currentTime + i * 0.1);
                osc.stop(audioCtx.currentTime + i * 0.1 + 0.2);
            });
        }

        // åˆå§‹åŒ–å¡ç‰Œ
        function initCards() {
            currentPuzzle = PUZZLES[Math.floor(Math.random() * PUZZLES.length)];
            cardValues = [...currentPuzzle.nums].sort(() => 0.5 - Math.random());
            cardUsed = [false, false, false, false];
            selectedCard = null;
            selectedOp = null;
            tempResult = null;
            expression = [];

            const area = document.getElementById('cardsArea');
            area.innerHTML = '';

            cardValues.forEach((num, i) => {
                const card = document.createElement('div');
                card.className = 'card' + (num > 8 ? '' : (Math.random() > 0.5 ? ' black' : ''));
                card.textContent = num;
                card.dataset.index = i;
                card.onclick = () => selectCard(i);
                area.appendChild(card);
            });

            document.getElementById('expression').textContent = 'ç‚¹å‡»å¡ç‰Œå¼€å§‹è®¡ç®—';
            document.getElementById('result').textContent = '';
            document.getElementById('result').classList.remove('correct');
            document.getElementById('hintBox').classList.add('hidden');

            updateOpButtons();
        }

        // é€‰æ‹©å¡ç‰Œ
        function selectCard(index) {
            if (cardUsed[index]) return;

            initAudio();
            playClickSound();

            const cards = document.querySelectorAll('.card');

            if (selectedCard === null) {
                // ç¬¬ä¸€å¼ ç‰Œ
                selectedCard = index;
                tempResult = cardValues[index];
                cards[index].classList.add('selected');
                expression = [cardValues[index]];
                updateExpression();
            } else if (selectedOp !== null) {
                // ç¬¬äºŒå¼ ç‰Œ - è®¡ç®—ç»“æœ
                const num2 = cardValues[index];
                const result = calculate(tempResult, selectedOp, num2);

                if (result === null) {
                    // é™¤æ³•ä¸æ•´é™¤ï¼Œä¸å…è®¸
                    return;
                }

                // æ ‡è®°ä¸¤å¼ ç‰Œå·²ç”¨
                cardUsed[selectedCard] = true;
                cardUsed[index] = true;
                cards[selectedCard].classList.add('used');
                cards[selectedCard].classList.remove('selected');
                cards[index].classList.add('used');

                expression.push(selectedOp === '*' ? 'Ã—' : (selectedOp === '/' ? 'Ã·' : selectedOp));
                expression.push(num2);

                tempResult = result;
                selectedCard = null;
                selectedOp = null;

                updateExpression();
                updateOpButtons();

                // æ£€æŸ¥æ˜¯å¦å®Œæˆ
                const usedCount = cardUsed.filter(x => x).length;
                if (usedCount === 4) {
                    document.getElementById('result').textContent = '= ' + tempResult;
                    if (Math.abs(tempResult - 24) < 0.001) {
                        // ç­”å¯¹äº†ï¼
                        document.getElementById('result').classList.add('correct');
                        playCorrectSound();
                        showConfetti();
                        solved++;
                        setTimeout(() => {
                            document.getElementById('successModal').classList.remove('hidden');
                            document.getElementById('solveInfo').textContent = `ç­”æ¡ˆï¼š${currentPuzzle.solution}`;
                        }, 800);
                    }
                } else {
                    // è¿˜æ²¡ç”¨å®Œï¼ŒæŠŠç»“æœä½œä¸ºæ–°çš„"è™šæ‹Ÿç‰Œ"
                    // åˆ›å»ºç»“æœç‰Œ
                    const resultCard = document.createElement('div');
                    resultCard.className = 'card';
                    resultCard.textContent = result;
                    resultCard.dataset.index = 'result';
                    resultCard.onclick = () => selectResultCard(result);
                    
                    // ç®€åŒ–ï¼šç›´æ¥è®©ç”¨æˆ·ç»§ç»­é€‰ç‰Œ
                    selectedCard = null;
                    document.getElementById('result').textContent = '= ' + result + ' (ç»§ç»­è®¡ç®—)';
                }
            }
        }

        function selectResultCard(value) {
            // é€‰æ‹©ä¹‹å‰è®¡ç®—çš„ç»“æœç»§ç»­è®¡ç®—
            if (selectedCard === null) {
                tempResult = value;
                selectedCard = 'result';
            }
        }

        // é€‰æ‹©è¿ç®—ç¬¦
        function selectOp(op) {
            if (selectedCard === null) return;

            playClickSound();
            selectedOp = op;
            updateOpButtons();
        }

        function updateOpButtons() {
            document.querySelectorAll('.op-btn').forEach(btn => {
                btn.classList.remove('selected');
                if (btn.dataset.op === selectedOp) {
                    btn.classList.add('selected');
                }
            });
        }

        // è®¡ç®—
        function calculate(a, op, b) {
            switch(op) {
                case '+': return a + b;
                case '-': return a - b;
                case '*': return a * b;
                case '/': 
                    if (b === 0) return null;
                    return a / b; // å…è®¸å°æ•°
                default: return null;
            }
        }

        // æ›´æ–°è¡¨è¾¾å¼æ˜¾ç¤º
        function updateExpression() {
            const exprEl = document.getElementById('expression');
            if (expression.length === 0) {
                exprEl.textContent = 'ç‚¹å‡»å¡ç‰Œå¼€å§‹è®¡ç®—';
            } else {
                exprEl.innerHTML = expression.map(item => 
                    `<span class="expr-item">${item}</span>`
                ).join('');
            }
        }

        // æ¸…ç©º
        function clearCalc() {
            initCards();
        }

        // æç¤º
        function showHint() {
            const hintBox = document.getElementById('hintBox');
            const hintText = document.getElementById('hintText');
            hintText.textContent = 'ğŸ’¡ ' + currentPuzzle.solution;
            hintBox.classList.remove('hidden');
        }

        // æ¢é¢˜
        function newGame() {
            level++;
            document.getElementById('level').textContent = level;
            document.getElementById('solved').textContent = solved;
            document.getElementById('successModal').classList.add('hidden');
            initCards();
        }

        // æ’’èŠ±
        function showConfetti() {
            const overlay = document.getElementById('successOverlay');
            const emojis = ['ğŸ‰', 'ğŸŠ', 'âœ¨', 'ğŸŒŸ', 'ğŸ’¯'];
            for (let i = 0; i < 15; i++) {
                const conf = document.createElement('div');
                conf.className = 'confetti';
                conf.textContent = emojis[Math.floor(Math.random() * emojis.length)];
                conf.style.left = Math.random() * 100 + '%';
                conf.style.animationDelay = Math.random() * 0.5 + 's';
                overlay.appendChild(conf);
            }
            setTimeout(() => overlay.innerHTML = '', 2500);
        }

        // å¼€å§‹
        function startGame() {
            document.getElementById('tutorial').classList.add('hidden');
            initAudio();
            initCards();
        }

        // åˆå§‹åŒ–
        initCards();
    </script>
</body>
</html>
